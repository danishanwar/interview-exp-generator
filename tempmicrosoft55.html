<html><body>
<style>body {background-color: #fcf;color:#black; font-size:20px;font-family:Helvetica;}</style>
b'<article class="content post-547525 post type-post status-publish format-standard hentry category-advanced-computer-subject tag-microsoft" id="post-547525"><h1>Microsoft Azure \xe2\x80\x93 Working with PowerShell in Cosmos DB</h1><div class="media"><div class="meta"><ul><li><span class="strong">Last Updated :</span>\n<span>26 Jan, 2021</span></li></ul></div></div><div class="text"><p><strong>Azure Cosmos DB </strong>is a fully managed NoSQL database for build applications designed by Microsoft. It is highly responsive, scalable, and fully automated. <strong>Azure Cloud Shell</strong> is an in-browser terminal used to manage cloud instances in Azure. The <strong>PowerShell </strong>is an application used for the same purpose but is installed locally.<p>In this article, we will look into<strong> </strong>Azure Cosmos DB with PowerShell where we will create a new Cosmos DB account, a database, and a container with PowerShell. Here we\xe2\x80\x99ll use the Azure Cloud Shell, and you can also use a local installation of <strong>PowerShell</strong>.Some of the operations that you can perform using PowerShell in Cosmos DB are listed below:<ul><li>Create a Cosmos DB database<li>Update Cosmos DB database<li>Delete Cosmos DB database</li></li></li></ul><p>To create a Cosmos DB database with Powershell/ Cloud Shell follow the below steps:<ul><li><strong>Step 1:</strong> Before we can start, we need to install the Cosmos DB PowerShell module like with the below command:</li></ul><pre>Install-Module -Name Az.CosmosDB</pre><p>At the end of the installation you need to verify again if to install the same as shown below:<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124205814/164.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124205814/164-660x78.PNG 660w, https://media.geeksforgeeks.org/wp-content/uploads/20210124205814/164-768x90.PNG 768w, https://media.geeksforgeeks.org/wp-content/uploads/20210124205814/164.PNG," width="900"/><div id="AP_G4GR_5"></div><ul><li><strong>Step 2: </strong>First, to see if it works, we will run the below command to list all Cosmos DB accounts in this resource group:</li></ul><pre>Get-AzCosmosDBAccount -ResourceGroupName "RESOURCE NAME"</pre><p>This will list the accounts as shown below:<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124211110/166.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124211110/166.PNG," width="648"/><p>And we can see that there is one in this resource group.<ul><li><strong>Step 3:</strong> Now, let\xe2\x80\x99s create a new Azure Cosmos DB account. This will contain a database that will contain containers with documents in it. This will be an account that uses the <strong>SQL API</strong> to work with data. This can take a while. At this stage, the Cosmos DB account is created.<li><strong>Step 4:</strong> Now we need a database for the account. To do so use the below command:</li></li></ul><pre>New-AzCosmosDBSqlDatabase</pre><p>It would result in something like below after completion:<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124211840/167.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124211840/167-660x212.PNG 660w, https://media.geeksforgeeks.org/wp-content/uploads/20210124211840/167.PNG," width="693"/><p>This creates a database, and it is done.\xc2\xa0<ul><li><strong>Step 5:</strong> Now, we can add a container to the database with the below command:</li></ul><pre>New-AzCosmosDBSqlContainer</pre><p>This will result in the following:<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124212222/168.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124212222/168.PNG," width="626"/><p>\xc2\xa0You can create multiple containers in a database, and this one would use the<strong> Autoscale feature</strong> as shown in the above image:<pre>$ autoscaleMaxThroughput = 4000 #minimum = 4000</pre><p>Now let\xe2\x80\x99s go to the Azure portal to look at the result. We are in the Azure Cosmos DB account in the Data Explorer. Here is the database, and under that is the container.<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124212642/169.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124212642/169.PNG," width="395"/><p>It also has autoscale enabled.\xc2\xa0<p><img sizes="100vw" src="https://media.geeksforgeeks.org/wp-content/uploads/20210124212817/170.PNG" srcset="https://media.geeksforgeeks.org/wp-content/uploads/20210124212817/170.PNG," width="659"/><p>We\xe2\x80\x99ve used PowerShell to list Azure Cosmos DB accounts and create a new one with a database and autoscale container.<div class="textBasedMannualAds_2"></div><div class="clear hideIt" id="personalNoteDiv"><div class="personalNoteHeader clear"><span class="noteHeaderText">My Personal Notes</span>\n<span class="hideNotesDivIcon"><i class="material-icons personalNotesIcon">arrow_drop_up</i></span></div><div class="collapsableDivPersonalNotes"><textarea class="personalNoteStyle" id="enteredPersonalNote" maxlength="5000" placeholder="Add your personal notes here! (max 5000 chars)"></textarea><div class="saveNoteDiv"><span class="processSaveNote"></span><button class="savePersonalNoteButton" onclick="saveUserPersonalNote()">Save</button></div></div></div></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></div></article>'
</html></body>
